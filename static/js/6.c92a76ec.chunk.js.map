{"version":3,"sources":["utils/form.js","components/Produce/CommonForm.js","components/Produce/EditForm.js","components/AppLayout/HeaderNav.js","models/menuData.js","components/AppLayout/SiderMenu.js","components/AppLayout/MainContent.js","core/constants.js","components/AppLayout/MainBreadcrumb.js","pages/Produce/Login.js","App.js"],"names":["Option","RangePicker","RadioGroup","Group","generateFormItem","item","itemCommonProps","handleBlur","props","type","placeholder","handleChange","inputType","onChange","e","target","value","onBlur","style","width","selectOptions","map","key","text","radioOptions","format","dateValue","FormItem","Item","CommonForm","form","formItems","layout","renderTailPart","record","onlyText","getFieldDecorator","formItemLayout","labelCol","xs","span","sm","wrapperCol","tailFormItemLayout","offset","className","name","label","displayName","display","options","margin","create","mapPropsToFields","result","Object","keys","forEach","createFormField","addItems","saveRecord","save","validateFields","err","values","reset","resetFields","marginRight","onClick","rules","required","message","connect","dispatch","useState","collapsed","setCollapsed","pwdModalVisible","setPwdModalVisible","menu","icon","preventDefault","cookies","remove","window","location","href","payload","overlay","get","title","visible","onCancel","footer","EditForm","userName","tempPassword","newPassword","then","data","code","success","error","menuList","iconType","path","component","dynamic","SubMenu","MenuItem","withRouter","pathname","substring","indexOf","theme","mode","defaultSelectedKeys","defaultOpenKeys","generateMenus","menuItem","children","length","to","generateRoutes","getRouteData","routes","Array","isArray","push","exact","MainContent","from","pathMap","company","employee","flow","price","order","report","paths","split","Constants","moduleName","rememberFlag","localStorage","getItem","remember","setRemember","position","top","left","background","height","padding","marginLeft","textAlign","initialValue","prefix","color","checked","removeItem","setItem","companyId","password","set","expires","Header","Sider","Content","state","common","siderMenuCollapsed","locale","zhCN","collapsible"],"mappings":"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","file":"static/js/6.c92a76ec.chunk.js","sourcesContent":["import React from 'react'\r\nimport { Input, Select, Radio, DatePicker } from 'antd'\r\n\r\nconst { Option } = Select\r\nconst { RangePicker } = DatePicker\r\nconst { Group: RadioGroup } = Radio\r\n\r\nexport function generateFormItem(item, options = {}) {\r\n  const { itemCommonProps: { handleBlur, ...itemProps } = {} } = options\r\n  const props = { ...itemProps, ...item.props }\r\n  const { type, placeholder, handleChange } = item\r\n\r\n  if (type === 'input' || type === 'password') {\r\n    const inputType = type === 'password' ? { type: 'password' } : {}\r\n    return (\r\n      <Input\r\n        {...inputType}\r\n        placeholder={placeholder}\r\n        {...props}\r\n        onChange={e => {\r\n          typeof handleChange === 'function' && handleChange(e.target.value)\r\n        }}\r\n        onBlur={e => {\r\n          typeof handleBlur === 'function' && handleBlur(e)\r\n        }}\r\n      />\r\n    )\r\n  }\r\n\r\n  if (type === 'select') {\r\n    return (\r\n      <Select\r\n        placeholder={placeholder}\r\n        style={{ width: '160px' }}\r\n        {...props}\r\n        onChange={value => {\r\n          typeof handleChange === 'function' && handleChange(value)\r\n        }}\r\n      >\r\n        {(item.selectOptions || []).map(item => (\r\n          <Option key={item.value} value={item.value}>\r\n            {item.text}\r\n          </Option>\r\n        ))}\r\n      </Select>\r\n    )\r\n  }\r\n\r\n  if (type === 'radio') {\r\n    return (\r\n      <RadioGroup\r\n        placeholder={placeholder}\r\n        {...props}\r\n        onChange={e => {\r\n          typeof handleChange === 'function' && handleChange(e.target.value)\r\n        }}\r\n      >\r\n        {(item.radioOptions || []).map(item => (\r\n          <Radio key={item.value} value={item.value}>\r\n            {item.text}\r\n          </Radio>\r\n        ))}\r\n      </RadioGroup>\r\n    )\r\n  }\r\n\r\n  if (type === 'rangepicker') {\r\n    return (\r\n      <RangePicker\r\n        format=\"YYYY-MM-DD\"\r\n        {...props}\r\n        onChange={dateValue => {\r\n          typeof handleChange === 'function' && handleChange(dateValue)\r\n        }}\r\n      />\r\n    )\r\n  }\r\n\r\n  if (type === 'datepicker') {\r\n    return (\r\n      <DatePicker\r\n        format=\"YYYY-MM-DD\"\r\n        {...props}\r\n        onChange={dateValue => {\r\n          typeof handleChange === 'function' && handleChange(dateValue)\r\n        }}\r\n      />\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { Form, Row } from 'antd'\r\n\r\nimport { generateFormItem } from '../../utils/form'\r\nimport './index.css'\r\n\r\nconst { Item: FormItem } = Form\r\n\r\nfunction CommonForm({ form, formItems = [], itemCommonProps, layout = 'horizontal', renderTailPart, record, onlyText = false }) {\r\n  const { getFieldDecorator } = form\r\n\r\n  const formItemLayout =\r\n    layout === 'horizontal'\r\n      ? {\r\n          labelCol: {\r\n            xs: { span: 24 },\r\n            sm: { span: 4 },\r\n          },\r\n          wrapperCol: {\r\n            xs: { span: 24 },\r\n            sm: { span: 20 },\r\n          },\r\n        }\r\n      : null\r\n\r\n  const tailFormItemLayout =\r\n    layout === 'horizontal'\r\n      ? {\r\n          wrapperCol: {\r\n            xs: {\r\n              span: 24,\r\n              offset: 0,\r\n            },\r\n            sm: {\r\n              span: 20,\r\n              offset: 4,\r\n            },\r\n          },\r\n        }\r\n      : null\r\n\r\n  return (\r\n    <Form layout={layout} className={layout}>\r\n      <Row>\r\n        {formItems.map(item => (\r\n          <FormItem key={item.name} label={item.displayName} {...formItemLayout}>\r\n            {onlyText && record[item.name]}\r\n            <span style={{ display: onlyText ? 'none' : 'block' }}>\r\n              {getFieldDecorator(item.name, item.options)(generateFormItem(item, { itemCommonProps }))}\r\n            </span>\r\n          </FormItem>\r\n        ))}\r\n      </Row>\r\n      <Row style={{ margin: '16px 0' }}>{renderTailPart ? <FormItem {...tailFormItemLayout}>{renderTailPart()}</FormItem> : null}</Row>\r\n    </Form>\r\n  )\r\n}\r\n\r\nexport default CommonForm\r\n","import React from 'react'\r\nimport CommonForm from './CommonForm'\r\nimport { Form, Button } from 'antd'\r\n\r\nfunction EditForm({ form, addItems = [], record = {}, saveRecord }) {\r\n  function save() {\r\n    form.validateFields((err, values) => {\r\n      if (err) {\r\n        return\r\n      }\r\n\r\n      saveRecord({ ...record, ...values })\r\n    })\r\n  }\r\n\r\n  function reset() {\r\n    form.resetFields()\r\n  }\r\n\r\n  return (\r\n    <CommonForm\r\n      form={form}\r\n      formItems={addItems}\r\n      renderTailPart={() => (\r\n        <>\r\n          <Button type=\"primary\" style={{ marginRight: '16px' }} onClick={save}>\r\n            保存\r\n          </Button>\r\n          <Button onClick={reset}>重置</Button>\r\n        </>\r\n      )}\r\n    />\r\n  )\r\n}\r\n\r\nexport default Form.create({\r\n  mapPropsToFields(props) {\r\n    const { record = {} } = props\r\n    const result = {}\r\n\r\n    Object.keys(record).forEach(key => {\r\n      result[key] = Form.createFormField({\r\n        value: record[key],\r\n      })\r\n    })\r\n\r\n    return result\r\n  },\r\n})(EditForm)\r\n","import React, { useState } from 'react'\r\nimport { Row, Col, Icon, Menu, Button, Dropdown, Modal, message } from 'antd'\r\nimport { connect } from 'dva'\r\nimport cookies from 'js-cookie'\r\n\r\nimport EditForm from '../Produce/EditForm'\r\nimport './HeaderNav.css'\r\n\r\nconst addItems = [\r\n  {\r\n    type: 'password',\r\n    name: 'password',\r\n    displayName: '当前密码',\r\n    options: {\r\n      rules: [\r\n        {\r\n          required: true,\r\n          message: '请输入当前密码',\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    type: 'password',\r\n    name: 'tempPassword',\r\n    displayName: '新密码',\r\n    options: {\r\n      rules: [\r\n        {\r\n          required: true,\r\n          message: '请输入新密码',\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    type: 'password',\r\n    name: 'newPassword',\r\n    displayName: '确认密码',\r\n    options: {\r\n      rules: [\r\n        {\r\n          required: true,\r\n          message: '请再次输入新密码',\r\n        },\r\n      ],\r\n    },\r\n  },\r\n]\r\n\r\nfunction HeaderNav({ dispatch }) {\r\n  const [collapsed, setCollapsed] = useState(false)\r\n  const [pwdModalVisible, setPwdModalVisible] = useState(false)\r\n\r\n  function toggle() {\r\n    setCollapsed(!collapsed)\r\n    dispatch({\r\n      type: 'common/saveSiderMenuCollapsed',\r\n      payload: !collapsed,\r\n    })\r\n  }\r\n\r\n  function updatePassword() {\r\n    setPwdModalVisible(true)\r\n  }\r\n\r\n  function saveRecord(values) {\r\n    const userName = cookies.get('userName')\r\n    const payload = { ...values, userName }\r\n\r\n    if (payload.tempPassword !== payload.newPassword) {\r\n      message.error('确认密码和新密码必须一致')\r\n      return\r\n    }\r\n\r\n    delete payload.tempPassword\r\n\r\n    dispatch({\r\n      type: 'user/savePassword',\r\n      payload,\r\n    }).then(data => {\r\n      if (!data || data.code) {\r\n        message.error('密码修改失败，请重试')\r\n        return\r\n      }\r\n\r\n      message.success('密码修改成功')\r\n      setPwdModalVisible(false)\r\n    })\r\n  }\r\n\r\n  function handleCancel() {\r\n    setPwdModalVisible(false)\r\n  }\r\n\r\n  function logout(e) {\r\n    e.preventDefault()\r\n\r\n    cookies.remove('userName')\r\n    cookies.remove('companyId')\r\n    window.location.href = `/`\r\n  }\r\n\r\n  const menu = (\r\n    <Menu>\r\n      <Menu.Item key=\"1\">\r\n        <Button type=\"link\" icon=\"logout\" onClick={updatePassword}>\r\n          修改密码\r\n        </Button>\r\n      </Menu.Item>\r\n      <Menu.Item key=\"2\">\r\n        <Button type=\"link\" icon=\"logout\" onClick={logout}>\r\n          退出登录\r\n        </Button>\r\n      </Menu.Item>\r\n    </Menu>\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col span={12}>\r\n          <Icon className=\"trigger\" type={collapsed ? 'menu-unfold' : 'menu-fold'} onClick={toggle} />\r\n        </Col>\r\n        <Col span={12}>\r\n          <div className=\"header_user\">\r\n            <Dropdown overlay={menu}>\r\n              <Button type=\"link\">{cookies.get('userName') || '未知用户'}</Button>\r\n            </Dropdown>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      <Modal title=\"修改密码\" visible={pwdModalVisible} onCancel={handleCancel} footer={null}>\r\n        <EditForm addItems={addItems} saveRecord={saveRecord} />\r\n      </Modal>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default connect()(HeaderNav)\r\n","import dynamic from 'dva/dynamic'\r\n\r\n/**\r\n * menuList: 菜单栏信息用于1.展示导航 2.生成路由信息\r\n * key: 唯一标识一个menu项\r\n * title: 页面标题文本\r\n * children: 如果是父级菜单，存在子级菜单，叶子菜单此项忽略\r\n * path: 叶子菜单此项必填，父级菜单此项忽略\r\n * component: 叶子菜单点击跳转后对应的加载组件\r\n */\r\nexport const menuList = [\r\n  {\r\n    key: 'company',\r\n    title: '公司信息管理',\r\n    iconType: 'team',\r\n    path: '/company',\r\n    component: dynamic({\r\n      component: () => import('../pages/Produce/Company'),\r\n    }),\r\n  },\r\n  {\r\n    key: 'employee',\r\n    title: '员工管理',\r\n    iconType: 'user',\r\n    path: '/employee',\r\n    component: dynamic({\r\n      component: () => import('../pages/Produce/Employee'),\r\n    }),\r\n  },\r\n  {\r\n    key: 'flow',\r\n    title: '工序管理',\r\n    iconType: 'interaction',\r\n    path: '/flow',\r\n    component: dynamic({\r\n      component: () => import('../pages/Produce/Flow'),\r\n    }),\r\n  },\r\n  {\r\n    key: 'price',\r\n    title: '工序历史价格',\r\n    iconType: 'pay-circle',\r\n    path: '/price',\r\n    component: dynamic({\r\n      component: () => import('../pages/Produce/Price'),\r\n    }),\r\n  },\r\n  {\r\n    key: 'order',\r\n    title: '订单管理',\r\n    iconType: 'ordered-list',\r\n    path: '/order',\r\n    component: dynamic({\r\n      component: () => import('../pages/Produce/Order'),\r\n    }),\r\n  },\r\n  {\r\n    key: 'report',\r\n    title: '报表管理',\r\n    iconType: 'schedule',\r\n    path: '/report',\r\n    component: dynamic({\r\n      component: () => import('../pages/Produce/Report'),\r\n    }),\r\n  },\r\n]\r\n\r\n// 将菜单列表过滤，抽取出所有路由信息-类似数组的扁平化处理\r\nexport function getRouteData(menuList) {\r\n  const routes = []\r\n\r\n  menuList.forEach(menuItem => {\r\n    if (Array.isArray(menuItem.children)) {\r\n      routes.push(...getRouteData(menuItem.children))\r\n    } else {\r\n      routes.push(menuItem)\r\n    }\r\n  })\r\n\r\n  return routes\r\n}\r\n","import React from 'react'\r\nimport { Menu, Icon } from 'antd'\r\nimport { withRouter, Link } from 'dva/router'\r\n\r\nimport { menuList } from '../../models/menuData'\r\n\r\nconst { SubMenu, Item: MenuItem } = Menu\r\n\r\nfunction generateMenus(menuList) {\r\n  return menuList.map(menuItem => {\r\n    if (menuItem.children && menuItem.children.length > 0) {\r\n      return (\r\n        <SubMenu\r\n          key={menuItem.key}\r\n          title={\r\n            <>\r\n              {menuItem.iconType && <Icon type={menuItem.iconType} />}\r\n              <span>{menuItem.title}</span>\r\n            </>\r\n          }\r\n        >\r\n          {generateMenus(menuItem.children)}\r\n        </SubMenu>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <MenuItem key={menuItem.key}>\r\n        <Link to={menuItem.path}>\r\n          {menuItem.iconType && <Icon type={menuItem.iconType} />}\r\n          <span>{menuItem.title}</span>\r\n        </Link>\r\n      </MenuItem>\r\n    )\r\n  })\r\n}\r\n\r\nfunction SiderMenu({ location }) {\r\n  const { pathname } = location\r\n  let key\r\n\r\n  if (pathname === '/') {\r\n    key = 'company'\r\n  } else {\r\n    key = pathname.substring(pathname.indexOf('/') + 1)\r\n  }\r\n\r\n  return (\r\n    <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={[key]} defaultOpenKeys={['company']}>\r\n      {generateMenus(menuList)}\r\n    </Menu>\r\n  )\r\n}\r\n\r\nexport default withRouter(SiderMenu)\r\n","import React from 'react'\r\nimport { Switch, Route, Redirect } from 'dva/router'\r\n\r\nimport { menuList, getRouteData } from '../../models/menuData'\r\n\r\nfunction generateRoutes(menuList) {\r\n  const routeData = getRouteData(menuList)\r\n\r\n  return routeData.map(item => <Route key={item.key} path={item.path} exact component={item.component} />)\r\n}\r\n\r\nfunction MainContent() {\r\n  return (\r\n    <Switch>\r\n      {generateRoutes(menuList)}\r\n      <Redirect exact from=\"/\" to=\"/company\" />\r\n    </Switch>\r\n  )\r\n}\r\n\r\nexport default MainContent\r\n","export const pathMap = {\r\n  company: '公司信息管理',\r\n  employee: '员工管理',\r\n  flow: '工序管理',\r\n  price: '价格管理',\r\n  order: '订单管理',\r\n  report: '报表查看',\r\n}\r\n\r\nexport const CODE = {\r\n  SUCCESS: 0,\r\n  FAIL: -1,\r\n}\r\n","import React from 'react'\r\nimport { Breadcrumb } from 'antd'\r\nimport { withRouter } from 'dva/router'\r\nimport * as Constants from '../../core/constants'\r\n\r\nfunction MainBreadcrumb({ location }) {\r\n  const { pathname } = location\r\n  const paths = pathname.split('/')\r\n\r\n  return (\r\n    <Breadcrumb style={{ margin: '16px 0' }}>\r\n      <Breadcrumb.Item>当前所在位置</Breadcrumb.Item>\r\n      {paths.map(path => path && <Breadcrumb.Item key={path}>{Constants.pathMap[path]}</Breadcrumb.Item>)}\r\n    </Breadcrumb>\r\n  )\r\n}\r\n\r\nexport default withRouter(MainBreadcrumb)\r\n","import React, { useState } from 'react'\r\nimport cookies from 'js-cookie'\r\nimport { Form, Icon, Input, Button, Checkbox, message } from 'antd'\r\nimport { connect } from 'dva'\r\n\r\nconst moduleName = 'user'\r\nfunction Login({ form, dispatch }) {\r\n  const rememberFlag = localStorage.getItem('rememberFlag') || false\r\n  const [remember, setRemember] = useState(rememberFlag)\r\n  const { getFieldDecorator } = form\r\n\r\n  function handleRemember() {\r\n    if (remember) {\r\n      localStorage.removeItem('rememberFlag')\r\n    } else {\r\n      localStorage.setItem('rememberFlag', true)\r\n    }\r\n\r\n    setRemember(!remember)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault()\r\n    form.validateFields((err, values) => {\r\n      if (!err) {\r\n        // 请求后台用户信息是否存在\r\n        dispatch({\r\n          type: `${moduleName}/fetchList`,\r\n          payload: values,\r\n        }).then(data => {\r\n          const result = data.data || []\r\n\r\n          if (result.length === 0) {\r\n            message.success('用户名或密码错误,请重新登录')\r\n            return\r\n          }\r\n\r\n          const { companyId, userName } = result[0] || {}\r\n\r\n          if (remember) {\r\n            localStorage.setItem('userName', userName)\r\n            localStorage.setItem('password', values.password)\r\n          }\r\n\r\n          cookies.set('userName', userName, { expires: 1 })\r\n          cookies.set('companyId', companyId, { expires: 1 })\r\n\r\n          window.location = '/'\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div style={{ position: 'absolute', top: 0, left: 0, background: '#eee', width: '100%', height: '100%' }}>\r\n      <Form\r\n        style={{\r\n          position: 'absolute',\r\n          background: '#fff',\r\n          width: 360,\r\n          padding: 20,\r\n          top: '30%',\r\n          left: '50%',\r\n          marginLeft: -180,\r\n        }}\r\n      >\r\n        <h2 style={{ textAlign: 'center' }}>工厂生产管理系统1.0</h2>\r\n        <Form.Item>\r\n          {getFieldDecorator('userName', {\r\n            initialValue: localStorage.getItem('userName'),\r\n            rules: [{ required: true, message: '请输入用户名!' }],\r\n          })(<Input prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"用户名\" />)}\r\n        </Form.Item>\r\n        <Form.Item>\r\n          {getFieldDecorator('password', {\r\n            initialValue: localStorage.getItem('password'),\r\n            rules: [{ required: true, message: '请输入密码!' }],\r\n          })(<Input prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"密码\" />)}\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Checkbox checked={remember} onClick={handleRemember}>\r\n            记住我\r\n          </Checkbox>\r\n          <Button type=\"primary\" className=\"login-form-button\" onClick={handleSubmit}>\r\n            登录\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect()(Form.create()(Login))\r\n","import React from 'react'\r\nimport { Layout } from 'antd'\r\nimport { connect } from 'dva'\r\nimport { Link } from 'dva/router'\r\nimport cookies from 'js-cookie'\r\n\r\nimport { ConfigProvider } from 'antd'\r\nimport zhCN from 'antd/es/locale/zh_CN'\r\n\r\nimport HeaderNav from './components/AppLayout/HeaderNav'\r\nimport SiderMenu from './components/AppLayout/SiderMenu'\r\nimport MainContent from './components/AppLayout/MainContent'\r\nimport MainBreadcrumb from './components/AppLayout/MainBreadcrumb'\r\nimport Login from './pages/Produce/Login'\r\n\r\nimport './App.css'\r\n\r\nconst { Header, Sider, Content } = Layout\r\n\r\nfunction App({ siderMenuCollapsed }) {\r\n  const linkText = '乐高生产管理系统'\r\n  const userName = cookies.get('userName')\r\n  if (!userName) {\r\n    return <Login />\r\n  }\r\n\r\n  return (\r\n    <ConfigProvider locale={zhCN}>\r\n      <Layout>\r\n        <Sider collapsible collapsed={siderMenuCollapsed}>\r\n          <div className=\"logo\">\r\n            <Link to=\"/\">\r\n              <h1>{linkText}</h1>\r\n            </Link>\r\n          </div>\r\n          <SiderMenu />\r\n        </Sider>\r\n        <Layout>\r\n          <Header className=\"header\">\r\n            <HeaderNav />\r\n          </Header>\r\n          <Content className=\"content\">\r\n            <MainBreadcrumb />\r\n            <MainContent />\r\n          </Content>\r\n        </Layout>\r\n      </Layout>\r\n    </ConfigProvider>\r\n  )\r\n}\r\n\r\nexport default connect(state => ({ ...state.common }))(App)\r\n"],"sourceRoot":""}