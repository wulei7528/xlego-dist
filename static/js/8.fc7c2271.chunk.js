(window["webpackJsonpxlego-fe"]=window["webpackJsonpxlego-fe"]||[]).push([[8],{391:function(e,t,a){"use strict";a(388);var n=a(392),o=(a(383),a(382)),r=a(44),c=a(1),i=a.n(c),l=a(400);a(404);t.a=n.a.create()((function(e){var t=e.form,a=e.queryItems,n=void 0===a?[]:a,c=e.queryRecord,u=e.addRecord,s=e.batchRecord,f=e.deleteRecord,p=e.exportExcel;function m(){t.validateFields((function(e,t){e||p(t)}))}var d=[{text:"\u67e5\u8be2",handerClick:function(){t.validateFields((function(e,t){e||c(t)}))},type:"primary"},{text:"\u91cd\u7f6e",handerClick:function(){t.resetFields()}}],y={handleBlur:function(e){t.setFieldsValue(Object(r.a)({},e.target.id,e.target.value.trim()))}};return i.a.createElement(l.a,{layout:"inline",form:t,formItems:n,itemCommonProps:y,renderTailPart:function(){return i.a.createElement("div",null,d.map((function(e){return i.a.createElement(o.a,{key:e.text,type:e.type,style:{marginRight:16},onClick:e.handerClick},e.text)})),u&&i.a.createElement(o.a,{type:"primary",style:{marginRight:16},onClick:u},"\u65b0\u589e"),s&&i.a.createElement(o.a,{className:"btn-orange",style:{marginRight:16},onClick:s},"\u6279\u91cf\u7ba1\u7406"),f&&i.a.createElement(o.a,{className:"btn-orange",style:{marginRight:16},onClick:f},"\u6279\u91cf\u5220\u9664"),p&&i.a.createElement(o.a,{className:"btn-orange",style:{marginRight:16},onClick:m},"\u5bfc\u51faExcel"))}})}))},431:function(e,t,a){},468:function(e,t){},596:function(e,t){},597:function(e,t){},605:function(e,t,a){"use strict";a.r(t);var n=a(5),o=a.n(n),r=(a(395),a(399)),c=(a(396),a(397)),i=(a(401),a(398)),l=a(435),u=a(44),s=a(590),f=(a(186),a(74)),p=a(387),m=a(1),d=a.n(m),y=a(104),g=a(591),h=a.n(g),b=(a(431),a(391));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O="report",E=[{type:"rangepicker",name:"time",displayName:"\u8d77\u59cb\u65f6\u95f4"}];t.default=Object(y.connect)((function(e){return w({},e.report)}))((function(e){var t=e.dispatch,a=e.list,n=e.pageInfo,u=e.loading,y=Object(m.useState)({current:1,pageSize:10,showSizeChanger:!0,showTotal:function(e){return"\u5171 ".concat(e," \u5458\u5de5")}}),g=Object(p.a)(y,2),v=g[0],j=g[1],k=Object(m.useState)({}),x=Object(p.a)(k,2),S=x[0],C=x[1];function I(){return(I=Object(s.a)(o.a.mark((function e(t,a){var n,r,c,i,u,s,p,m,d,y,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.employee,r=void 0===n?[]:n,c=t.flow,i=void 0===c?[]:c,u=t.orderSizeCost,s=void 0===u?[]:u,p=["\u5de5\u5e8f\u540d\u79f0"].concat(Object(l.a)(r.map((function(e){return e.employeeName})))),0!==s.length){e.next=5;break}return f.a.error("\u5f53\u524d\u65f6\u95f4\u6bb5\u62a5\u8868\u8ba2\u5355\u4fe1\u606f\u4e3a\u7a7a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),e.abrupt("return");case 5:m=i.map((function(e){var t=s.filter((function(t){return t.flowId===e.flowId}));return[e.flowName].concat(Object(l.a)(r.map((function(e){var a=t.find((function(t){return t.employeeId===e.employeeId}));return a?"".concat(a.size,"\u4ef6/").concat(a.cost,"\u5143"):""}))))})),d=["\u6c47\u603b"].concat(Object(l.a)(r.map((function(e){return e.totalSize&&e.totalCost?"".concat(e.totalSize,"\u4ef6/").concat(e.totalCost,"\u5143"):""})))),m.unshift(p),m.push(d),y=h.a.utils.aoa_to_sheet(m),g=h.a.utils.book_new(),h.a.utils.book_append_sheet(g,y,"\u62a5\u8868\u6570\u636e"),h.a.writeFile(g,"".concat(a,".xlsx"));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N,Y=a.employee,z=void 0===Y?[]:Y,D=a.flow,R=void 0===D?[]:D,P=a.orderSizeCost,T=void 0===P?[]:P,M=(N=z,[{title:"\u5de5\u5e8f\u540d\u79f0",dataIndex:"flowName",key:"flowName",width:100}].concat(Object(l.a)(N.map((function(e){return{title:e.employeeName,dataIndex:e.employeeId,key:e.employeeId,width:100}}))))),q=[];if(T.length){q.push.apply(q,Object(l.a)(R.map((function(e){var t={};return T.filter((function(t){return t.flowId===e.flowId})).forEach((function(e){t[e.employeeId]="".concat(e.size,"\u4ef6/").concat(e.cost,"\u5143")})),t.flowName="".concat(e.flowName," (\u7f16\u53f7:").concat(e.flowId,")"),t}))));var F={flowName:"\u6c47\u603b"};z.forEach((function(e){e.totalSize&&e.totalCost&&(F[e.employeeId]="".concat(e.totalSize,"\u4ef6/").concat(e.totalCost,"\u5143"))})),q.push(F)}return d.a.createElement(r.a,null,d.a.createElement(b.a,{queryItems:E,queryRecord:function(e){var a=e.time,n=void 0===a?[]:a,o=[];2===n.length&&(o[0]="".concat(n[0].format("YYYY-MM-DD")," 00:00:00"),o[1]="".concat(n[1].format("YYYY-MM-DD")," 23:59:59"));var r={createTimeStart:o[0],createTimeEnd:o[1],pageNo:1,pageSize:v.pageSize};C(r),t({type:"".concat(O,"/fetchList"),payload:r})},exportExcel:function(e){var a=e.time,n=void 0===a?[]:a,o=[];if(2===n.length){2===n.length&&(o[0]="".concat(n[0].format("YYYY-MM-DD")," 00:00:00"),o[1]="".concat(n[1].format("YYYY-MM-DD")," 23:59:59"));var r={createTimeStart:o[0],createTimeEnd:o[1]};t({type:"".concat(O,"/fetchListAll"),payload:r}).then((function(e){if(e.code)f.a.error(e.msg||"\u83b7\u53d6\u5168\u91cf\u6570\u636e\u9519\u8bef");else{var t="".concat(o[0],"- ").concat(o[1],"\u62a5\u8868");!function(e,t){I.apply(this,arguments)}(e.data,t)}}))}else f.a.error("\u8bf7\u9009\u62e9\u5bfc\u51fa\u7684\u65e5\u671f\u8303\u56f4")},buttonText:{queryButtonText:"\u751f\u6210\u62a5\u8868"}}),d.a.createElement(c.a,{tip:"\u52aa\u529b\u52a0\u8f7d\u4e2d...",spinning:u.list||!1},d.a.createElement(i.a,{className:"report-table",size:"small",dataSource:q,columns:M,bordered:!0,onChange:function(e){var a=w({},v,{},e);j(a);var n=w({},S,{pageNo:a.current,pageSize:a.pageSize});C(n),t({type:"".concat(O,"/fetchList"),payload:n})},pagination:w({},v,{total:n.total}),rowKey:"flowName"})),d.a.createElement("div",null,d.a.createElement("p",{style:{marginTop:10}},"\u5de5\u5e8f\u884c\uff1a\u7edf\u8ba1\u5458\u5de5",d.a.createElement("span",{style:{fontWeight:"bold",marginRight:20}},"\u4e00\u4e2a\u5de5\u5e8f\u4e0b\u6240\u505a\u8ba2\u5355\u7684\u603b\u4ef6\u6570/\u603b\u8d39\u7528"),"\u6c47\u603b\u884c\uff1a\u7edf\u8ba1\u5458\u5de5",d.a.createElement("span",{style:{fontWeight:"bold"}},"\u505a\u5168\u90e8\u8ba2\u5355\u7684\u603b\u4ef6\u6570/\u603b\u8d39\u7528"))))}))}}]);
//# sourceMappingURL=8.fc7c2271.chunk.js.map