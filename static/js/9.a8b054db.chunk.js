(window["webpackJsonpxlego-fe"]=window["webpackJsonpxlego-fe"]||[]).push([[9,10],{391:function(e,t,n){"use strict";n(388);var a=n(392),r=(n(383),n(382)),o=n(44),i=n(1),c=n.n(i),l=n(400);n(404);t.a=a.a.create()((function(e){var t=e.form,n=e.queryItems,a=void 0===n?[]:n,i=e.queryRecord,u=e.addRecord,p=e.batchRecord,d=e.deleteRecord,s=e.exportExcel;function f(){t.validateFields((function(e,t){e||s(t)}))}var y=[{text:"\u67e5\u8be2",handerClick:function(){t.validateFields((function(e,t){e||i(t)}))},type:"primary"},{text:"\u91cd\u7f6e",handerClick:function(){t.resetFields()}}],m={handleBlur:function(e){t.setFieldsValue(Object(o.a)({},e.target.id,e.target.value.trim()))}};return c.a.createElement(l.a,{layout:"inline",form:t,formItems:a,itemCommonProps:m,renderTailPart:function(){return c.a.createElement("div",null,y.map((function(e){return c.a.createElement(r.a,{key:e.text,type:e.type,style:{marginRight:16},onClick:e.handerClick},e.text)})),u&&c.a.createElement(r.a,{type:"primary",style:{marginRight:16},onClick:u},"\u65b0\u589e"),p&&c.a.createElement(r.a,{className:"btn-orange",style:{marginRight:16},onClick:p},"\u6279\u91cf\u7ba1\u7406"),d&&c.a.createElement(r.a,{className:"btn-orange",style:{marginRight:16},onClick:d},"\u6279\u91cf\u5220\u9664"),s&&c.a.createElement(r.a,{className:"btn-orange",style:{marginRight:16},onClick:f},"\u5bfc\u51faExcel"))}})}))},431:function(e,t,n){},462:function(e,t,n){"use strict";n.r(t);n(395);var a=n(399),r=(n(396),n(397)),o=(n(401),n(398)),i=(n(383),n(382)),c=(n(402),n(407)),l=(n(186),n(74)),u=n(44),p=n(387),d=n(1),s=n.n(d),f=n(104),y=n(379),m=n.n(y),b=n(391),g=n(409);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v="employee",w="\u5458\u5de5",j=[{type:"input",name:"id",displayName:"\u8f66\u5de5ID"},{type:"input",name:"employeeName",displayName:"\u8f66\u5de5\u59d3\u540d"},{type:"input",name:"telephone",displayName:"\u8054\u7cfb\u7535\u8bdd"},{type:"select",name:"employeeRole",displayName:"\u8f66\u5de5\u89d2\u8272",selectOptions:[{text:"\u5168\u90e8",value:""},{text:"\u666e\u901a\u8f66\u5de5",value:"\u666e\u901a\u8f66\u5de5"},{text:"\u719f\u624b",value:"\u719f\u624b"}],options:{initialValue:""}}],S=[{type:"input",name:"employeeName",displayName:"\u8f66\u5de5\u59d3\u540d",options:{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8f66\u5de5\u59d3\u540d"}]}},{type:"select",name:"employeeRole",displayName:"\u8f66\u5de5\u89d2\u8272",selectOptions:[{text:"\u666e\u901a\u8f66\u5de5",value:"\u666e\u901a\u8f66\u5de5"},{text:"\u719f\u624b",value:"\u719f\u624b"}],options:{initialValue:"\u666e\u901a\u8f66\u5de5"}},{type:"radio",name:"gender",displayName:"\u6027\u522b",radioOptions:[{text:"\u7537",value:1},{text:"\u5973",value:2}],options:{initialValue:1}},{type:"datepicker",name:"birthdate",displayName:"\u51fa\u751f\u65e5\u671f"},{type:"input",name:"telephone",displayName:"\u8054\u7cfb\u7535\u8bdd",options:{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8f66\u5de5\u8054\u7cfb\u7535\u8bdd"}]}}];t.default=Object(f.connect)((function(e){return O({},e.employee)}))((function(e){var t=e.dispatch,n=e.list,u=e.pageInfo,f=e.record,y=e.loading,h=e.pageRole,x=e.batchOrder,E=Object(d.useState)(!1),C=Object(p.a)(E,2),I=C[0],k=C[1],N=Object(d.useState)([]),R=Object(p.a)(N,2),D=R[0],P=R[1],z=Object(d.useState)({current:1,pageSize:10,showSizeChanger:!0,showTotal:function(e){return"\u5171 ".concat(e," \u6761\u8bb0\u5f55")}}),T=Object(p.a)(z,2),F=T[0],L=T[1],Y=Object(d.useState)({}),V=Object(p.a)(Y,2),q=V[0],M=V[1],H=Object(d.useRef)();function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var n=e.map((function(e){return e.id})).join();c.a.confirm({content:"\u786e\u8ba4\u8981\u5220\u9664".concat(w),onOk:function(){t({type:"".concat(v,"/batchDelete"),payload:{type:1,ids:n}}).then((function(){return K()}))},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"})}else l.a.error("\u8bf7\u9009\u62e9\u81f3\u5c11\u4e00\u4e2a\u5220\u9664\u9009\u9879")}function K(){L(O({},F,{current:1})),t({type:"".concat(v,"/saveRecord"),payload:{}}),H.current.resetFields()}Object(d.useEffect)((function(){t({type:"".concat(v,"/fetchList"),payload:{pageNo:F.current,pageSize:F.pageSize}})}),[t,F]);var B={onChange:function(e,t){P(t)}},J=[{title:"\u8f66\u5de5ID",dataIndex:"id",key:"id",width:100},{title:"\u8f66\u5de5\u59d3\u540d",dataIndex:"employeeName",key:"employeeName",width:120},{title:"\u8f66\u5de5\u89d2\u8272",dataIndex:"employeeRole",key:"employeeRole",width:100},{title:"\u8054\u7cfb\u7535\u8bdd",dataIndex:"telephone",key:"telephone",width:160}],A={};"order"!==h?(A.addRecord=function(){k(!0)},A.deleteRecord=function(){return _(D)},J.push.apply(J,[{title:"\u6027\u522b",dataIndex:"gender",key:"gender",width:60,render:function(e){return{1:"\u7537",2:"\u5973"}[e]}},{title:"\u51fa\u751f\u65e5\u671f",dataIndex:"birthdate",key:"birthdate",width:120},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",key:"createTime",width:120,render:function(e){return m()(e).format("YYYY-MM-DD HH:mm:SS")}},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updateTime",key:"updateTime",width:120,render:function(e){return m()(e).format("YYYY-MM-DD HH:mm:SS")}},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",width:150,render:function(e,n){return s.a.createElement(s.a.Fragment,null,s.a.createElement(i.a,{type:"primary",size:"small",onClick:function(){return function(e){t({type:"".concat(v,"/getRecord"),payload:{id:e.id}}).then((function(){k(!0)}))}(n)},style:{margin:5}},"\u4fee\u6539"),s.a.createElement(i.a,{type:"primary",size:"small",onClick:function(){return _([n])}},"\u5220\u9664"))}}])):(J.unshift({title:"\u8ba2\u5355\u64cd\u4f5c",dataIndex:"operation",key:"operation",width:100,render:function(e,t){return s.a.createElement(s.a.Fragment,null,s.a.createElement(i.a,{type:"primary",size:"small",onClick:function(){return x(t)},style:{marginRight:10}},"\u7ba1\u7406\u8ba2\u5355"))}}),J.push({}));var G={};return"order"!==h&&(G.rowSelection=B),f.birthdate=m()(f.birthdate),s.a.createElement(a.a,null,s.a.createElement(b.a,Object.assign({ref:H,queryItems:j,queryRecord:function(e){var n=O({},e,{pageNo:1,pageSize:F.pageSize});M(n),t({type:"".concat(v,"/fetchList"),payload:n})}},A)),s.a.createElement(r.a,{tip:"\u52aa\u529b\u52a0\u8f7d\u4e2d...",spinning:y.list},s.a.createElement(o.a,Object.assign({size:"small",bordered:!0,rowKey:"id",dataSource:n,columns:J,onChange:function(e){var n=O({},F,{},e);L(n);var a=O({},q,{pageNo:n.current,pageSize:n.pageSize});M(a),t({type:"".concat(v,"/fetchList"),payload:a})},pagination:O({},F,{total:u.total})},G))),s.a.createElement(c.a,{title:"\u7f16\u8f91".concat(w),width:800,onCancel:function(){t({type:"".concat(v,"/saveRecord"),payload:{}}),k(!1)},visible:I,footer:null},s.a.createElement(g.a,{addItems:S,record:f,saveRecord:function(e){var n=O({},e,{birthdate:e.birthdate.format("YYYY-MM-DD")});t({type:"".concat(v,"/updateRecord"),payload:n}).then((function(){k(!1),K()}))}})))}))},606:function(e,t,n){"use strict";n.r(t);var a=n(387),r=(n(460),n(469)),o=n(1),i=n.n(o),c=(n(395),n(399)),l=(n(396),n(397)),u=(n(401),n(398)),p=(n(383),n(382)),d=(n(402),n(407)),s=(n(186),n(74)),f=n(44),y=n(104),m=n(379),b=n.n(m),g=n(391),h=n(409);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w="order",j="\u8ba2\u5355",S=[{type:"input",name:"id",displayName:"\u8ba2\u5355ID"},{type:"input",name:"employeeName",displayName:"\u8f66\u5de5\u59d3\u540d",placeholder:"\u8f93\u5165\u59d3\u540d\u6216\u6309\u5b57\u67e5\u627e"},{type:"input",name:"flowName",displayName:"\u5de5\u5e8f\u540d\u79f0"}];var x=Object(y.connect)((function(e){return v({},e.order,{employeeList:e.employee.list,flowList:e.flow.list})}))((function(e){var t=e.dispatch,n=e.list,r=e.pageInfo,f=e.record,y=e.loading,m=e.employeeList,O=e.flowList,x=Object(o.useState)(!1),E=Object(a.a)(x,2),C=E[0],I=E[1],k=Object(o.useState)([]),N=Object(a.a)(k,2),R=N[0],D=N[1],P=Object(o.useState)({current:1,pageSize:10,showSizeChanger:!0,showTotal:function(e){return"\u5171 ".concat(e," \u6761\u8bb0\u5f55")}}),z=Object(a.a)(P,2),T=z[0],F=z[1],L=Object(o.useState)({}),Y=Object(a.a)(L,2),V=Y[0],q=Y[1],M=Object(o.useRef)(),H=Object(o.useRef)();function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var n=e.map((function(e){return e.id})).join();d.a.confirm({content:"\u786e\u8ba4\u8981\u5220\u9664".concat(j),onOk:function(){t({type:"".concat(w,"/batchDelete"),payload:{type:4,id:n}}).then((function(){return K()}))},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"})}else s.a.error("\u8bf7\u9009\u62e9\u81f3\u5c11\u4e00\u4e2a\u5220\u9664\u9009\u9879")}function K(){F(v({},T,{current:1})),t({type:"".concat(w,"/saveRecord"),payload:{}}),M.current.resetFields()}Object(o.useEffect)((function(){t({type:"".concat(w,"/fetchList"),payload:{pageNo:T.current,pageSize:T.pageSize}}),t({type:"employee/fetchList",payload:{pageNo:1,pageSize:9999}}),t({type:"flow/fetchList",payload:{pageNo:1,pageSize:9999}})}),[t,T]);var B={onChange:function(e,t){D(t)}},J=[{title:"\u8ba2\u5355ID",dataIndex:"id",key:"id"},{title:"\u8f66\u5de5\u59d3\u540d",dataIndex:"employeeName",key:"employeeName"},{title:"\u5de5\u5e8f\u540d\u79f0",dataIndex:"flowName",key:"flowName"},{title:"\u6570\u91cf",dataIndex:"size",key:"size"},{title:"\u5de5\u5e8f\u4ef7\u683c",dataIndex:"price",key:"price"},{title:"\u5de5\u5e8f\u8d39\u7528",dataIndex:"cost",key:"cost"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",key:"createTime",render:function(e){return b()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updateTime",key:"updateTime",render:function(e){return b()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(e,n){return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{type:"primary",size:"small",onClick:function(){return function(e){t({type:"".concat(w,"/getRecord"),payload:{id:e.id}}).then((function(){I(!0)}))}(n)},style:{marginRight:10}},"\u4fee\u6539"),i.a.createElement(p.a,{type:"primary",size:"small",onClick:function(){return _([n])}},"\u5220\u9664"))}}],A=[{type:"select",name:"employeeId",displayName:"\u8f66\u5de5\u59d3\u540d",options:{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8f66\u5de5\u59d3\u540d"}]},selectOptions:m.map((function(e){return{value:e.id,text:e.employeeName}})),props:{showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}}},{type:"select",name:"flowId",displayName:"\u5de5\u5e8f\u540d\u79f0",options:{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5de5\u5e8f\u540d\u79f0"}]},selectOptions:O.map((function(e){return{value:e.id,text:e.flowName}})),handleChange:function(e){var t=H.current,n=e,a=O.find((function(e){return e.id===n})),r=parseFloat(a.price),o=parseFloat(t.getFieldValue("size")||0);t.setFieldsValue({price:r}),t.setFieldsValue({cost:r*o})},props:{showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}}},{type:"input",name:"size",displayName:"\u6570\u91cf",options:{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5de5\u5e8f\u6570\u91cf"}]},handleChange:function(e){var t=H.current,n=parseFloat(t.getFieldValue("price")),a=parseFloat(e);t.setFieldsValue({cost:n*a})}},{type:"input",name:"price",displayName:"\u5de5\u5e8f\u5355\u4ef7",props:{disabled:!0}},{type:"input",name:"cost",displayName:"\u5de5\u5e8f\u8d39\u7528",props:{disabled:!0}}];return i.a.createElement(c.a,null,i.a.createElement(g.a,{ref:M,queryItems:S,queryRecord:function(e){var n=v({},e,{pageNo:1,pageSize:T.pageSize});q(n),t({type:"".concat(w,"/fetchList"),payload:n})},addRecord:function(){t({type:"".concat(w,"/saveRecord"),payload:{}}),I(!0)},deleteRecord:function(){return _(R)}}),i.a.createElement(l.a,{tip:"\u52aa\u529b\u52a0\u8f7d\u4e2d...",spinning:y.list},i.a.createElement(u.a,{size:"small",dataSource:n,columns:J,rowSelection:B,bordered:!0,rowKey:"id",onChange:function(e){var n=v({},T,{},e);F(n);var a=v({},V,{pageNo:n.current,pageSize:n.pageSize});q(a),t({type:"".concat(w,"/fetchList"),payload:a})},pagination:v({},T,{total:r.total})})),i.a.createElement(d.a,{title:"\u7f16\u8f91".concat(j),width:800,onCancel:function(){I(!1)},visible:C,footer:null},i.a.createElement(h.a,{addItems:A,record:f,saveRecord:function(e){var n=v({},e,{flowId:e.flowId,employeeId:e.employeeId});t({type:"".concat(w,"/updateRecord"),payload:n}).then((function(){I(!1),K()}))},ref:H})))})),E=n(57),C=n.n(E),I=n(462),k=n(435),N=(n(388),n(392)),R=n(472),D=(n(410),n(433));function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function T(e,t,n){return t&&z(e.prototype,t),n&&z(e,n),e}function F(e){return(F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e){return(L="function"===typeof Symbol&&"symbol"===F(Symbol.iterator)?function(e){return F(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":F(e)})(e)}function Y(e,t){return!t||"object"!==L(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}n(418);var H=n(411);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=H.a.Option,J=i.a.createContext(),A=function(e){function t(){var e,n;P(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Y(this,(e=V(t)).call.apply(e,[this].concat(r)))).getInput=function(e){var t=e.inputChange,a=n.props,r=a.inputType,o=a.disabled,c=a.items;return"select"===r?i.a.createElement(H.a,{style:{width:200},onChange:t},c.map((function(e){return i.a.createElement(B,{value:e.value,key:e.value},e.text)}))):i.a.createElement(D.a,{disabled:o,onChange:function(e){return t(e.target.value)}})},n.renderCell=function(e){var t=e.getFieldDecorator,a=n.props,r=a.editing,o=a.dataIndex,c=a.title,l=(a.inputType,a.record),u=(a.index,a.children),p=a.inputChange,d=a.displayText,s=Object(R.a)(a,["editing","dataIndex","title","inputType","record","index","children","inputChange","displayText"]);return i.a.createElement("td",s,r?i.a.createElement(N.a.Item,{style:{margin:0}},t("".concat(l.id,"-").concat(o),{rules:[{required:!0,message:"Please Input ".concat(c,"!")}],initialValue:l[o]})(n.getInput({inputChange:p}))):d||u)},n}return M(t,e),T(t,[{key:"render",value:function(){return i.a.createElement(J.Consumer,null,this.renderCell)}}]),t}(i.a.Component),G=function(e){function t(e){var n;return P(this,t),(n=Y(this,V(t).call(this,e))).addRow=function(){var e=n.state.newCount,t={id:"new-".concat(e)};n.setState({newCount:e+1,data:[t].concat(Object(k.a)(n.state.data)),edit:!0})},n.startEdit=function(){var e=n.state,t=e.data,a=e.edit,r=n.props,o=r.form,i=r.submitData;t&&t.length?a?o.validateFields((function(e,r){e?s.a.error("\u5b57\u6bb5\u5b58\u5728\u9519\u8bef",e):i(t).then((function(e){e.code?s.a.error("\u4fdd\u5b58\u5931\u8d25"):(s.a.success("\u4fdd\u5b58\u6210\u529f"),n.setState({data:e.data,edit:!a}))}))})):n.setState({edit:!a}):s.a.error("\u8bf7\u5148\u6dfb\u52a0\u8bb0\u5f55\u518d\u63d0\u4ea4")},n.update=function(e,t,a){var r=Object(k.a)(n.state.data),o=r.findIndex((function(t){return e===t.id}));if(o>-1){var i=r[o];r.splice(o,1,K({},i,Object(f.a)({},t,a))),n.setState({data:r})}},n.isNewRecord=function(e){var t=e.id;return 0===(void 0===t?"new":t).toString().indexOf("new")},n.batchRemove=function(){var e=n.state,t=e.selectedRows,a=void 0===t?[]:t,r=e.data,o=a.filter((function(e){return!n.isNewRecord(e)}));if(0===o.length)return a.length?(a.forEach((function(e){var t=r.find((function(t){return t.id===e.id}));r.splice(t,1)})),void n.setState({data:r})):void s.a.error("\u8bf7\u9009\u62e9\u81f3\u5c11\u4e00\u6761\u5f85\u5220\u9664\u8bb0\u5f55");n.props.batchDelete(o)},n.updateKeyValues=function(e,t){var a=Object(k.a)(n.state.data),r=a.findIndex((function(t){return e===t.id}));if(r>-1){var o=a[r];a.splice(r,1,K({},o,{},t)),n.setState({data:a})}else a.push({}),n.setState({data:a})},n.setClassName=function(e,t){return n.props.setClassName&&n.props.setClassName(e,t)},n.state={data:[],props:e,edit:!1,newCount:0,seletedRows:[]},n}return M(t,e),T(t,[{key:"render",value:function(){var e=this,t={body:{cell:A}},n=this.props.columns.map((function(t){return t.editable?K({},t,{onCell:function(n){return{record:n,inputType:t.inputType,dataIndex:t.dataIndex,title:t.title,editing:e.state.edit,items:t.items,disabled:t.disabled||!1,displayText:t.getDisplayText&&t.getDisplayText(n),inputChange:function(a){t.inputChange?t.inputChange({form:e.props.form,record:n,value:a,update:e.updateKeyValues}):e.update(n.id,t.dataIndex,a)}}}}):t})),a={onChange:function(t,n){e.setState({selectedRows:n})}};return i.a.createElement(J.Provider,{value:this.props.form},i.a.createElement("div",{style:{marginBottom:10}},i.a.createElement(p.a,{type:"primary",style:{marginRight:16},onClick:this.addRow},"\u65b0\u589e\u4e00\u884c"),i.a.createElement(p.a,{type:"primary",style:{marginRight:16},onClick:this.startEdit},this.state.edit?"\u63d0\u4ea4\u8ba2\u5355":"\u4fee\u6539\u8ba2\u5355"),i.a.createElement(p.a,{type:"danger",onClick:this.batchRemove},"\u6279\u91cf\u5220\u9664")),i.a.createElement(u.a,{rowSelection:a,components:t,bordered:!0,size:"small",dataSource:this.state.data,columns:n,rowClassName:"editable-row",pagination:this.props.pagination,onChange:this.props.onChange,rowKey:"id"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.props;return e.list!==n.list?{edit:!1,data:e.list,props:{list:e.list}}:null}}]),t}(i.a.Component),Q=N.a.create()(G);n(431);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X="order",Z="\u8ba2\u5355";var $=Object(y.connect)((function(e){return{employeeList:e.employee.list,flowList:e.flow.list}}))((function(e){var t=e.dispatch,n=e.flowList,r=Object(o.useState)(!1),c=Object(a.a)(r,2),l=c[0],u=c[1],p=Object(o.useState)({}),y=Object(a.a)(p,2),m=y[0],b=y[1],g=Object(o.useState)([]),h=Object(a.a)(g,2),O=h[0],v=h[1],w=Object(o.useState)({current:1,pageSize:9999,showTotal:function(e){return"\u5171 ".concat(e," \u6761\u8bb0\u5f55")}}),j=Object(a.a)(w,2),S=j[0],x=j[1],E=[{title:"\u8ba2\u5355ID",dataIndex:"id",key:"id",render:function(e,t){return t.id&&0===t.id.toString().indexOf("new")?"\u65b0\u8ba2\u5355":t.id}},{title:"\u5de5\u5e8f\u540d\u79f0",dataIndex:"flowId",key:"flowId",editable:!0,inputType:"select",getDisplayText:function(e){return(n.find((function(t){return t.id===e.flowId}))||{}).flowName},items:n.map((function(e){return{value:e.id,text:e.flowName}})),inputChange:function(e){var t=e.form,a=e.record,r=e.value,o=e.update,i=(n.find((function(e){return e.id===r}))||{}).price,c=(a.size||0)*i;t.setFieldsValue(Object(f.a)({},"".concat(a.id,"-price"),i)),t.setFieldsValue(Object(f.a)({},"".concat(a.id,"-cost"),c)),o(a.id,{flowId:r,price:i,cost:c})}},{title:"\u5de5\u5e8f\u4ef7\u683c",dataIndex:"price",key:"price",editable:!0,disabled:!0},{title:"\u6570\u91cf",dataIndex:"size",key:"size",editable:!0,inputChange:function(e){var t=e.form,n=e.record,a=e.value,r=e.update,o=a>=0?a:0,i=o*(Number(n.price)||0);t.setFieldsValue(Object(f.a)({},"".concat(n.id,"-cost"),i)),r(n.id,{size:o,cost:i})}},{title:"\u5de5\u5e8f\u8d39\u7528",dataIndex:"cost",key:"cost",editable:!0,disabled:!0}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(I.default,{pageRole:"order",batchOrder:function(e){u(!0),b(e),t({type:"".concat(X,"/fetchList"),payload:{employeeId:e.id,pageNo:S.current,pageSize:S.pageSize}}).then((function(e){v(e.data||[])}))}}),i.a.createElement(d.a,{title:i.a.createElement("div",null,"\u7ba1\u7406",i.a.createElement("span",{style:{color:"red"}},m.employeeName),"\u7684\u8ba2\u5355"),width:1200,style:{top:30},onCancel:function(){u(!1)},visible:l,footer:null},i.a.createElement("div",{style:{height:400,overflowY:"auto"}},i.a.createElement(Q,{list:O,columns:E,rowKey:"id",setClassName:function(e){return e.id&&0===e.id.toString().indexOf("new")?"row-add":""},submitData:function(e){var n=C.a.get("companyId"),a=e.map((function(e){var t=W({},e);return 0===e.id.toString().indexOf("new")&&(t.id=null,t.companyId=n,t.employeeId=m.id),delete t.employeeName,delete t.flowName,t}));return t({type:"".concat(X,"/orderbatch"),payload:a})},batchDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var n=e.map((function(e){return e.id})).join();d.a.confirm({content:"\u786e\u8ba4\u8981\u5220\u9664".concat(Z),onOk:function(){t({type:"".concat(X,"/batchDelete"),payload:{type:4,id:n}}).then((function(){t({type:"".concat(X,"/fetchList"),payload:{employeeId:m.id}}).then((function(e){v(e.data||[])}))}))},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"})}else s.a.error("\u8bf7\u9009\u62e9\u81f3\u5c11\u4e00\u4e2a\u5220\u9664\u9009\u9879")},onChange:function(e){var n=W({},S,{},e);x(n);var a={employeeId:m.id,pageNo:n.current,pageSize:n.pageSize};t({type:"".concat(X,"/fetchList"),payload:a})},pagination:S}))))})),ee=r.a.TabPane;t.default=function(){var e=Object(o.useState)("1"),t=Object(a.a)(e,2),n=t[0],c=t[1];return i.a.createElement(r.a,{onChange:function(e){c(e)}},i.a.createElement(ee,{tab:"\u8ba2\u5355\u5217\u8868",key:"1"},"1"===n&&i.a.createElement(x,null)),i.a.createElement(ee,{tab:"\u6279\u91cf\u8ba2\u5355\u7ba1\u7406",key:"2"},"2"===n&&i.a.createElement($,null)))}}}]);
//# sourceMappingURL=9.a8b054db.chunk.js.map